<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd">
	<sub-flow name="common-parse-template-sub-flow" doc:id="276ffaf2-f941-4a2b-98a1-2e8af18f0122" >
		<logger level="INFO" doc:name="Start Log" doc:id="d83ecc74-7bdc-4bcb-b531-d4a7198b9d1d" message='#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;    appName: app.name,&#10;    flowName : flow.name,&#10;    position: "Flow Start",&#10;    message: "Sub flow to update the UI by parse template started",&#10;    correlationId: correlationId,&#10;    timestamp: now() &gt;&gt; "UTC"&#10;}]'/>
		<parse-template doc:name="Update UI" doc:id="72067f84-b850-46b6-8a94-377651720e12" outputMimeType="text/html">
			<content >&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;MuleSoft Word Sleuth&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* New: The &quot;in-between&quot; dark blue gradient */
            background: #3a6073;
            background: -webkit-linear-gradient(to right, #3a6073, #16222a);
            background: linear-gradient(to right, #3a6073, #16222a);
            text-align: center;
            padding-top: 50px;
        }
        h1 {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            color: #333;
        }
        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            max-width: 550px;
            margin: auto;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .word { font-size: 2.5em; letter-spacing: 10px; margin: 20px 0; color: #333; }
        .message { color: #1c1e21; font-weight: bold; margin: 20px 0; font-size: 1.1em; }
        p { color: #333; }
        strong { color: #000; }
        input[type=text] {
            text-transform: uppercase;
            padding: 10px;
            width: 60px;
            text-align: center;
            font-size: 1.5em;
            border: 2px solid #ccc;
            border-radius: 4px;
            background-color: #fff;
            color: #333;
        }
        .button {
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            transition: transform 0.2s ease;
        }
        .button:hover {
            transform: scale(1.05);
        }
        .guess-button {
            background-color: #007bff;
            color: white;
        }
        .clue-button {
            background-color: #ffc107;
            color: #212529;
            margin-left: 10px;
        }
        .play-again {
            background-color: #28a745;
            color: white;
            margin-top: 20px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

    &lt;div class=&quot;game-container&quot;&gt;
        &lt;h1 style=&quot;margin-bottom: 5px;&quot;&gt;MuleSoft Word Sleuth&lt;/h1&gt;
        &lt;p style=&quot;color: #606770; margin-top: 0;&quot;&gt;#[payload.question]&lt;/p&gt;
        
        &lt;p class=&quot;message&quot;&gt;#[payload.message]&lt;/p&gt;

        &lt;div class=&quot;word&quot;&gt;#[payload.displayWord]&lt;/div&gt;

        &lt;p&gt;Lives Remaining: &lt;strong&gt;#[payload.lives]&lt;/strong&gt;&lt;/p&gt;

        #[if (payload.status == 'IN_PROGRESS')
        '
        &lt;div&gt;
            &lt;form action=&quot;/cc-word-sleuth/guess&quot; method=&quot;get&quot; style=&quot;display:inline;&quot;&gt;
                &lt;input type=&quot;hidden&quot; name=&quot;gameId&quot; value=&quot;#[payload.gameId]&quot; /&gt;
                &lt;input type=&quot;text&quot; name=&quot;letter&quot; maxlength=&quot;1&quot; required autofocus /&gt;
                &lt;br/&gt;&lt;br/&gt;
                &lt;button type=&quot;submit&quot; class=&quot;button guess-button&quot;&gt;Guess Letter&lt;/button&gt;
                &lt;a href=&quot;/cc-word-sleuth/clue?gameId=#[payload.gameId]&quot; class=&quot;button clue-button&quot;&gt;Get Clue Package&lt;/a&gt;
            &lt;/form&gt;
            &lt;small style=&quot;display:block; margin-top:8px; color:#6c757d;&quot;&gt;(-1 Life for getting a clue)&lt;/small&gt;
        &lt;/div&gt;
        '
        else
        '
        &lt;div&gt;
            &lt;a href=&quot;/cc-word-sleuth/web-game&quot; class=&quot;button play-again&quot;&gt;Play Again&lt;/a&gt;
        &lt;/div&gt;
        '
        ]

        #[if(payload.clues != null)
        '
        &lt;div class=&quot;clues-container&quot; style=&quot;text-align: left; margin-top: 20px; border-top: 1px solid #ddd; padding-top: 15px;&quot;&gt;
          &lt;h3&gt;Clue Package:&lt;/h3&gt;
          &lt;p&gt;&lt;strong&gt;Definition:&lt;/strong&gt; #[payload.clues.definition]&lt;/p&gt;
          &lt;p&gt;&lt;strong&gt;Rhymes with:&lt;/strong&gt; #[payload.clues.rhyme]&lt;/p&gt;
          &lt;p&gt;&lt;strong&gt;Synonym:&lt;/strong&gt; #[payload.clues.synonym]&lt;/p&gt;
        &lt;/div&gt;
        '
        else '']
    &lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;</content>
		</parse-template>
		<logger level="INFO" doc:name="End Log" doc:id="07b19c1e-5685-443c-9189-cd74763e35b7" message='#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;    appName: app.name,&#10;    flowName : flow.name,&#10;    position: "Flow End",&#10;    message: "Sub flow ro update the UI by parse template ended",&#10;    correlationId: correlationId,&#10;    timestamp: now() &gt;&gt; "UTC"&#10;}]'/>
	</sub-flow>
</mule>
